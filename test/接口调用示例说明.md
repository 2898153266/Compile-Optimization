# 接口调用示例说明

## 文件：test_main.c

这是一个完整的示例程序，展示了如何在你的主程序中调用 DGEMM 性能测试接口。

## 使用方法

### 1. 查看示例代码

```c
#include <stdio.h>
#include "test_interface.h"

int main(void) {
    // 调用性能测试接口
    int ret = run_dgemm_benchmark();
    
    if (ret == 0) {
        printf("测试成功完成！\n");
    } else {
        printf("测试失败，错误代码: %d\n", ret);
    }
    
    return ret;
}
```

### 2. 编译示例程序

```bash
# Windows PowerShell（一行）
gcc -O2 -I. test_main.c benchmark.c dgemm_unroll.o dgemm_unroll_ass.o dgemm_wrappers.o -DNO_MAIN -o test_main.exe

# Windows PowerShell（换行，使用反引号）
gcc -O2 -I. test_main.c benchmark.c `
    dgemm_unroll.o dgemm_unroll_ass.o dgemm_wrappers.o `
    -DNO_MAIN -o test_main.exe

# Windows CMD（使用^换行符）
gcc -O2 -I. test_main.c benchmark.c ^
    dgemm_unroll.o dgemm_unroll_ass.o dgemm_wrappers.o ^
    -DNO_MAIN -o test_main.exe

# Linux/ARM (FT2000Q)
gcc -O2 -I. test_main.c benchmark.c \
    dgemm_unroll.o dgemm_unroll_ass.o dgemm_wrappers.o \
    -DNO_MAIN -o test_main
```

### 3. 运行程序

```bash
# Windows
.\test_main.exe

# Linux/ARM
./test_main
```

## 输出示例

程序会输出详细的性能测试报告，包括：
- 测试配置信息
- 每个矩阵规模的平均时间和标准差
- 性能汇总表格

## 关键点说明

1. **只需包含一个头文件**：`test_interface.h`
2. **调用一个函数**：`run_dgemm_benchmark()`
3. **编译时添加 -DNO_MAIN**：让 benchmark.c 不生成自己的 main 函数
4. **统一使用 -O2**：所有文件保持一致的优化级别
5. **返回值**：0 表示成功，-1 表示失败

## 集成到你的程序

你可以在程序的任何地方调用 `run_dgemm_benchmark()`：

```c
#include "test_interface.h"

int main(void) {
    // 你的初始化代码...
    
    printf("开始性能测试...\n");
    run_dgemm_benchmark();
    
    // 继续你的程序逻辑...
    
    return 0;
}
```

测试结果会直接通过 printf 输出到控制台。
